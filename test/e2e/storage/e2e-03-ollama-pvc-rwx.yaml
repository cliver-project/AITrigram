---
# E2E Test: ModelRepository with PVC ReadWriteMany (RWX) storage for Ollama
# Uses the default storage class if it supports ReadWriteMany access mode
# Requires network storage like: NFS, CephFS, AWS EFS, Azure Files, GlusterFS
# Will be skipped on clusters with block storage only (AWS EBS, GCP PD, Azure Disk)
#
# Note: The PVC will be automatically created by the controller in the
# aitrigram-system namespace (where the controller runs)

apiVersion: aitrigram.cliver-project.github.io/v1
kind: ModelRepository
metadata:
  name: ollama-pvc-rwx-test
spec:
  source:
    origin: ollama
    modelId: qwen2.5:0.5b  # Small model for faster testing

  storage:
    type: PersistentVolumeClaim
    mountPath: /data/models
    persistentVolumeClaim:
      size: 2Gi
      accessMode: ReadWriteMany
      # storageClassName not specified - uses cluster default storage class

  autoDownload: true
