---
# E2E Test: ModelRepository with PVC ReadWriteMany (RWX) storage for Ollama
# Requires a storage class that supports ReadWriteMany access mode
# Examples: nfs-client, rook-cephfs, AWS EFS, Azure Files
#
# Note: The PVC will be automatically created by the controller in the
# aitrigram-system namespace (where the controller runs)

apiVersion: aitrigram.cliver-project.github.io/v1
kind: ModelRepository
metadata:
  name: ollama-pvc-rwx-test
spec:
  source:
    origin: ollama
    modelId: qwen2.5:0.5b  # Small model for faster testing

  storage:
    type: PersistentVolumeClaim
    mountPath: /data/models
    persistentVolumeClaim:
      size: 2Gi
      accessMode: ReadWriteMany
      storageClassName: nfs-client  # Change to your RWX storage class

  autoDownload: true
